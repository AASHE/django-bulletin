{% extends 'base.html' %}

{% load bootstrap3 %}

{% block content %}

  <div class="headline">
    <h2>
      Search Results
    </h2>
  </div>

  {% if query %}
    {% for result in page.object_list %}
          {% if result.content_type = 'plugins.story' %}
            {% with result.object as story %}
              <div class="row blog blog-medium">
                <div class="col-sm-3 text-right">
                </div>
                <div class="col-sm-9">
                  <h5>
                    NEWS
                  </h5>
                </div>
              </div>
              {% include "plugins/story.html" %}
            {% endwith %}
          {% elif result.content_type = 'plugins.event' %}
            {% with result.object as event %}
              <div class="row blog blog-medium">
                <div class="col-sm-3 text-right">
                </div>
                <div class="col-sm-9">
                  <h5>
                    EVENT
                  </h5>
                </div>
              </div>
              {% include "plugins/event.html" %}
            {% endwith %}
          {% elif result.content_type = 'plugins.job' %}
            {% with result.object as job %}
              <div class="row blog blog-medium">
                <div class="col-sm-3 text-right">
                </div>
                <div class="col-sm-9">
                  <h5>
                    JOB
                  </h5>
                </div>
              </div>
              {% include "plugins/job.html" %}
            {% endwith %}
          {% elif result.content_type = 'plugins.newresource' %}
            {% with result.object as new_resource %}
              <div class="row blog blog-medium">
                <div class="col-sm-3 text-right">
                </div>
                <div class="col-sm-9">
                  <h5>
                    RESOURCE
                  </h5>
                </div>
              </div>
              {% include "plugins/new_resource.html" %}
            {% endwith %}
          {% elif result.content_type = 'plugins.opportunity' %}
            {% with result.object as opportunity %}
              <div class="row blog blog-medium">
                <div class="col-sm-3 text-right">
                </div>
                <div class="col-sm-9">
                  <h5>
                    OPPORTUNITY
                  </h5>
                </div>
              </div>
              {% include "plugins/opportunity.html" %}
            {% endwith %}
          {% endif %}
    {% empty %}
      <p>No results found.</p>
    {% endfor %}

    {% if page.has_previous or page.has_next %}
      <div>
        {% if page.has_previous %}
          <a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">
        {% endif %}
        &laquo; Previous
        {% if page.has_previous %}
          </a>
        {% endif %}
        |
        {% if page.has_next %}
          <a href="?q={{ query }}&amp;page={{ page.next_page_number }}">
        {% endif %}
        Next &raquo;
        {% if page.has_next %}
          </a>
        {% endif %}
      </div>
    {% endif %}
  {% else %}
    {# Show some example queries to run, maybe query syntax, something else? #}
  {% endif %}
{% endblock %}
